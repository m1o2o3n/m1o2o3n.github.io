<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery-ui.min.js"></script>
		<script src="js/overhang.min.js"></script>

		<link rel="stylesheet" type="text/css" href="css/overhang.css"/>
		<style type="text/css">
			.cc_in{
				width: 48%;
				height: 300px;
				float: left;
			}
		</style>
	</head>
	<body>
		<h1>微信转为html(新网站使用)</h1>
		<h2>使用前需要删掉视频。<small>这里指微信公众号的素材视频，可以再后期导入网站，注意限制最大宽度为600-680px</small>	</h2>
		<h2>这里对于图片的处理仅仅是限制其最大宽度不超过600px，可能出现img超出边界情况，请手动处理。</h2>
		
		<div id="" class="cc">
			<textarea rows="" cols="" class="cc_in" id="weiin" placeholder="这里输入微信内容"></textarea>
		</div>
		<div id="" class="cc">
			<textarea rows="" cols="" class="cc_in" id="htmlout" placeholder="生成html"></textarea>
		</div>
		<div id="">
			<button type="button" id="dochange" onclick="weitohtml()" onclick=" showchange()" style="width: 80%;height: 80px; margin: 10px 10%;">点击按钮转换</button>
		</div>
			<textarea rows="" cols="" class="cc_in" id="htmlout" placeholder="生成html"><META name="referrer" content="no-referrer" /><STYLE>body>table:nth-child(11)>tbody>tr>td>table:nth-child(3)>tbody>tr>td>table>tbody>tr>td:nth-child(2)>table>tbody>tr>td>table:nth-child(3)>tbody>tr:nth-child(5)>td img{max-width:630px;}</STYLE></textarea>
		</div>

	</body>
		
	<script>
		htmlheader = '<div style="max-width:600px;float: none; display: block; margin-left: auto; margin-right: auto;">';
		htmlfooter = '</div>';
		htmlcopy = '<META name="referrer" content="no-referrer" /><STYLE>body>table:nth-child(11)>tbody>tr>td>table:nth-child(3)>tbody>tr>td>table>tbody>tr>td:nth-child(2)>table>tbody>tr>td>table:nth-child(3)>tbody>tr:nth-child(5)>td img{max-width:630px;}</STYLE>'
		
		function weitohtml(){
			wei = document.getElementById("weiin").value;
			html = wei.replace(/section/g,"div");
			html = html.replace(/Microsoft YaHei&quot;/g,"");
			html = html.replace(/data-tools="新媒体管家"/g,"");
			html = html.replace(/data-tools="135编辑器" /g,"");
			html = html.replace(/data-support="96编辑器" /g,"");
			html = html.replace(/data-support="xiumi.us" /g,"");
			html = html.replace(/data-support="xmt.cn" /g,"");
			html = html.replace(/class="_editor" /g,"");
			html = html.replace(/微软雅黑/g,"宋体");
			html = html.replace(/Microsoft Yahei/g,"SimSun");
      html = html.replace(/yiban.io/g, "");
      html = html.replace(/xiumi.us/g, "");
			if(html != ""){
				html = htmlheader + html + htmlfooter
			}
			
			document.getElementById("htmlout").value = html;
		}
		
		function docopy(){
			window.clipboardData.setData("Text",htmlcopy);
		}
		
		//这里是完成提示,懒得修改jQuery了
		$(function() {
			$('#dochange').on('click', function() {
				$('body').overhang({
					type: 'success',
					message: '修改完成',
					closeConfirm: true,
					duration: 3,
					upper: true
				});
			});
		});
	</script>
</html>
